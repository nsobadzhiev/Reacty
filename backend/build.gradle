/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.3.1/userguide/tutorial_java_projects.html
 */

// Apply the java plugin to add support for Java
apply plugin: 'java'

// Apply the application plugin to add support for building an application
apply plugin: 'application'

// In this section you declare where to find the dependencies of your project
repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

project.ext {
    dropwizardVersion = '1.2.2'
}

dependencies {
    compile (
            'io.dropwizard:dropwizard-core:' + dropwizardVersion,
            'io.dropwizard:dropwizard-hibernate:' + dropwizardVersion,
            'io.dropwizard:dropwizard-migrations:' + dropwizardVersion,
            'io.dropwizard:dropwizard-auth:' + dropwizardVersion,
            'io.dropwizard:dropwizard-assets:' + dropwizardVersion,
            'io.dropwizard:dropwizard-forms:' + dropwizardVersion,
            'io.dropwizard-bundles:dropwizard-configurable-assets-bundle:1.0.5',
            'org.glassfish.jersey.media:jersey-media-multipart:2.7',
            'com.h2database:h2:1.3.168',
            'com.google.guava:guava:23.0',
            'org.mongodb:mongodb-driver:3.6.1',
            'org.mongojack:mongojack:2.7.0'
    )

    // Use JUnit test framework
    testCompile 'junit:junit:4.12'
}

jar {
    // Keep jar clean:
    exclude 'META-INF/*.SF', 'META-INF/*.DSA', 'META-INF/*.RSA', 'META-INF/*.MF'

    manifest {
        attributes 'Main-Class': 'com.devmonologue.reacty.ReactyApplication',
                'Class-Path': configurations.runtime.files.collect { "lib/$it.name" }.join(' ')
    }
    // How-to add class path:
    //     https://stackoverflow.com/questions/22659463/add-classpath-in-manifest-using-gradle
    //     https://gist.github.com/simon04/6865179
}

run {
    args = ["server", "src/reacty.yml"]
}

// Define the main class for the application
mainClassName = 'com.devmonologue.reacty.ReactyApplication'

